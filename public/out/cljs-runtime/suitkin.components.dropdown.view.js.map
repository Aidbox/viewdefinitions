{"version":3,"sources":["suitkin/components/dropdown/view.cljc"],"mappings":"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","names":["suitkin.components.dropdown.view/component","properties","cljs.core/deref","open?","re_frame.core.subscribe","suitkin.components.dropdown.styles/root","suitkin.components.input.view/component","cljs.core.merge","and__5043__auto__","cljs.core/not","cljs.core.get_in","cljs.core.assoc","suitkin.utils/public-src","cljs.core.update","callback","event","re-frame.core/dispatch","menu","suitkin.components.dropdown.styles/menu-items","temp__5802__auto__","items","cljs.core/seq","iter__5523__auto__","s__47244","cljs.core/LazySeq","temp__5804__auto__","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__47246","cljs.core/chunk-buffer","i__47245","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__47243","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","item","suitkin.components.dropdown.styles/menu-item","or__5045__auto__","cljs.core/sequential?","p1__47227#","cljs.core/some","cljs.core._EQ_","cljs.core/map?","suitkin.components.dropdown.styles/menu-item-selected","suitkin.components.dropdown.styles/menu-item-empty","cljs.core/chunk-first"],"sourcesContent":["(ns suitkin.components.dropdown.view\n  (:require\n   [re-frame.core :as rf]\n   [suitkin.components.input.view :as input]\n   [suitkin.utils :as u]\n   [suitkin.components.sidebar.view]\n   [suitkin.components.dropdown.model  :as m]\n   [suitkin.components.dropdown.styles :as s]))\n\n(defn component\n  [properties]\n  (let [open? @(rf/subscribe [::m/open? (:id properties)])]\n    [:div {:class [s/root (:class properties)]}\n     [input/component\n      (merge  \n       (when (and (:value properties)\n                  (not (get-in properties [:search :on-change])))\n         {:readOnly true\n          :style {:cursor \"pointer\"}\n          :value (get-in properties [:value :title])})\n       (-> (:search properties)\n           (assoc :type \"search\")\n           (assoc :s/right [:img {:src (u/public-src \"/suitkin/img/icon/ic-chevron-down-16.svg\")}])\n           (update :on-focus\n                   (fn [callback]\n                     (fn [event]\n                       (rf/dispatch [::m/open (:id properties)])\n                       (when callback (callback event)))))\n           (update :on-click\n                   (fn [callback]\n                     (fn [event]\n                       (rf/dispatch [::m/open (:id properties)])\n                       (when callback (callback event)))))\n           (update :on-blur\n                   (fn [callback]\n                     (fn [event]\n                       (rf/dispatch [::m/close (:id properties)])\n                       (when callback (callback event)))))))]\n     (when open?\n       (let [menu (:menu properties)]\n         [:div {:class s/menu-items}\n          (if-let [items (seq (:items menu))]\n            (for [item items] ^{:key (:value item)}\n              [:div {:id    (:id item)\n                     :class [s/menu-item (when (or (and (sequential? (:value properties))\n                                                        (some #(= (:value %) (:value item))\n                                                              (:value properties)))\n                                                   (and (map? (:value properties))\n                                                        (= (:value item) (get-in properties [:value :value]))))\n                                           s/menu-item-selected)]\n                     :on-mouse-down (fn [event]\n                                      #?(:cljs (.preventDefault event))\n                                      (when-let [callback (:on-select menu)]\n                                        (callback event item))\n                                      (when-not (:multiselect? menu)\n                                        (rf/dispatch [::m/close (:id properties)])))}\n               (:title item)])\n            [:div {:class s/menu-item-empty}\n             (get-in properties [:menu :not-found] \"No items found\")])]))]))\n"]}